<!-- modules/finanze.html -->
<header class="flex justify-between items-center w-full mb-6 mt-2">
    <div>
        <h1 class="text-3xl font-bold text-darkblue-heading mb-1">Finanze</h1>
        <p class="text-sm font-medium opacity-80" id="fin-month-label">Spese di questo mese</p>
    </div>
    <button id="btn-add-expense"
        class="clay-btn-primary w-12 h-12 rounded-full flex items-center justify-center text-white transition-all active:scale-95">
        <i class="fa-solid fa-plus text-lg"></i>
    </button>
</header>

<!-- Dashboard Budget -->
<div
    class="clay-card bg-darkblue-card rounded-[2rem] p-6 mb-8 flex flex-col items-center justify-center relative overflow-hidden">
    <!-- Cerchio bg decorativo -->
    <div class="absolute -top-10 -right-10 w-32 h-32 bg-darkblue-accent/10 rounded-full blur-2xl"></div>
    <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-[#3b82f6]/10 rounded-full blur-2xl"></div>

    <p class="text-sm font-bold text-darkblue-icon uppercase tracking-wide mb-2 z-10">Totale Spese Comuni</p>
    <h2 class="text-5xl font-bold text-darkblue-heading z-10 flex items-start gap-1">
        <span id="fin-total-amount">0</span>
        <span class="text-2xl text-darkblue-accent mt-1">€</span>
    </h2>

    <!-- Split Bilancio -->
    <div id="fin-balances"
        class="w-full mt-6 bg-darkblue-base rounded-2xl p-4 flex justify-around items-center z-10 shadow-inner">
        <!-- Generato da JS -->
        <span class="text-darkblue-icon text-sm">Caricamento bilanci...</span>
    </div>
</div>

<!-- Lista Ultime Spese -->
<section class="flex flex-col gap-4">
    <div class="flex justify-between items-end">
        <h2 class="text-xl font-bold text-darkblue-heading">Ultime Spese</h2>
    </div>

    <div id="expenses-list" class="flex flex-col gap-3">
        <!-- Spese Generate via JS -->
    </div>
</section>

<!-- MODALE AGGIUNTA SPESA (Nascosta di default) -->
<div id="modal-add-expense"
    class="fixed inset-0 bg-darkblue-base/90 z-[60] flex flex-col justify-end transition-opacity duration-300 opacity-0 pointer-events-none">
    <div class="clay-card bg-darkblue-card w-full max-w-md mx-auto rounded-t-[2.5rem] p-6 pb-24 transform translate-y-full transition-transform duration-300"
        id="modal-content-expense">

        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-darkblue-heading">Aggiungi Spesa</h3>
            <button id="btn-close-expense-modal"
                class="w-8 h-8 rounded-full flex items-center justify-center text-darkblue-icon hover:text-red-400">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>

        <form id="form-add-expense" class="flex flex-col gap-4">
            <!-- Descrizione -->
            <input type="text" id="exp-desc" placeholder="Cosa abbiamo pagato? (es. Spesa Coop)" required
                autocomplete="off"
                class="clay-input w-full bg-darkblue-base h-12 px-6 rounded-3xl text-darkblue-text placeholder-darkblue-icon/70 focus:outline-none focus:ring-2 focus:ring-darkblue-accent/50 outline-none border-none">

            <!-- Importo -->
            <div class="relative">
                <input type="number" id="exp-amount" placeholder="0.00" step="0.01" required autocomplete="off"
                    class="clay-input w-full bg-darkblue-base h-12 pl-6 pr-12 rounded-3xl text-darkblue-text placeholder-darkblue-icon/70 focus:outline-none focus:ring-2 focus:ring-darkblue-accent/50 outline-none border-none font-bold text-lg text-right">
                <div class="absolute right-6 top-1/2 -translate-y-1/2 font-bold text-darkblue-icon">€</div>
            </div>

            <!-- Categoria -->
            <select id="exp-category"
                class="clay-input w-full bg-darkblue-base h-12 px-6 rounded-3xl text-darkblue-text focus:outline-none focus:ring-2 focus:ring-darkblue-accent/50 outline-none border-none appearance-none">
                <option value="Spesa">Spesa Alimentare</option>
                <option value="Bollette">Bollette & Casa</option>
                <option value="Bambini">Bambini</option>
                <option value="Svago">Svago / Uscite</option>
                <option value="Altro">Altro</option>
            </select>

            <!-- Chi ha pagato -->
            <h4 class="text-sm font-bold text-darkblue-heading ml-2 mt-2">Chi ha anticipato i soldi?</h4>
            <select id="exp-paidby" required
                class="clay-input w-full bg-darkblue-base h-12 px-6 rounded-3xl text-darkblue-text focus:outline-none focus:ring-2 outline-none border-none appearance-none">
                <!-- Membri caricati da JS -->
            </select>

            <!-- Pulsante Salva -->
            <button type="submit"
                class="clay-btn-primary w-full h-12 rounded-3xl font-bold text-white mt-4 flex items-center justify-center gap-2 active:scale-95 transition-transform">
                <i class="fa-solid fa-check"></i> Registra Spesa
            </button>
        </form>
    </div>
</div>